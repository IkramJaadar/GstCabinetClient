<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="Tooplate">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <link rel="stylesheet" href="~/css/bootstrap.min.css">
    <link rel="stylesheet" href="~/css/font-awesome.min.css">
    <link rel="stylesheet" href="~/css/animate.css">
    <link rel="stylesheet" href="~/css/owl.carousel.css">
    <link rel="stylesheet" href="~/css/owl.theme.default.min.css">

    <!-- MAIN CSS -->
    <link rel="stylesheet" href="~/css/tooplate-style.css">
</head>
<body id="top" data-spy="scroll" data-target=".navbar-collapse" data-offset="50">
    <!-- MENU -->
    <section class="navbar navbar-default navbar-static-top" role="navigation">
        <div class="container">

            <div class="navbar-header">
                <button class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="icon icon-bar"></span>
                    <span class="icon icon-bar"></span>
                    <span class="icon icon-bar"></span>
                </button>
            </div>
            <!-- MENU LINKS -->
            <div class="collapse navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="/Home/Index" class="smoothScroll">Home</a></li>
                    <li class="appointment-btn"><a href="/Authentification/Connect">Se connecter</a></li>
                   
                </ul>
            </div>

        </div>
    </section>
  @*  @model List<Disponibilite>
    @{
        var medcins = ViewBag.doctors as List<Medcin>;
    }
    <!-- MAKE AN APPOINTMENT -->
    <section id="appointment" data-stellar-background-ratio="3">
        <div class="container">
            <div class="row">

                <div class="col-lg col-sm-6">
           </div>

                <div class="col-lg col-sm-6">
                    <!-- CONTACT FORM HERE -->
                     @foreach (var doctor in medcins)
    {
                            <div class="col-lg-11 grid-margin stretch-card">
                                <div class="card mb">
                                    <div class="card-body">
                                        <h4>@doctor.Nom @doctor.Prenom</h4>
                                        <div class="table-responsive">
                                            <table class="table" cellspacing="0">
                                                <a href="/Disponibilite/Add" class="text-success">
                                                    <i class="mdi mdi-calendar-plus
"></i>
                                                </a>
                                                <thead>
                                                    <tr>
                                                        <th>
                                                        </th>
                                                        @{
                                                            int annee = DateTime.Now.Year;
                                                            int mois = DateTime.Now.Month;
                                                            int nombreJours = DateTime.DaysInMonth(annee, mois);
                                                        }
                                                        @for (int i = DateTime.Now.Day; i <= nombreJours; i++)
                                                        {
                                                            <th>
                                                                <center>
                                                                    @DateTime.Now.AddDays(i-DateTime.Now.Day).ToString("dddd")<br />
                                                                    @DateTime.Now.AddDays(i-DateTime.Now.Day).ToString("dd-MM-yyyy")
                                                                </center>
                                                            </th>
                                                        }
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    @{
                                                        var horraire = Model.Where(x=>x.MedcinID==doctor.Id).Select(h => new { h.Horraire }).Distinct().OrderBy(h => h.Horraire).ToList();
                                                    }
                                                    @foreach (var dispo in horraire)
                                                    {
                                                        <tr>
                                                            <td>
                                                                @dispo.Horraire
                                                            </td>

                                                            @for (int i = DateTime.Now.Day; i <= nombreJours; i++)
                                                            {
                                                                var disp = Model.Where(d=>d.MedcinID==doctor.Id && d.Horraire == dispo.Horraire && d.DateRendezvous.Year == DateTime.Now.AddDays(i - DateTime.Now.Day).Year && d.DateRendezvous.Month == DateTime.Now.AddDays(i - DateTime.Now.Day).Month && d.DateRendezvous.Day == DateTime.Now.AddDays(i - DateTime.Now.Day).Day).FirstOrDefault();
                                                                if (disp != null)
                                                                {
                                                                    <td>

                                                                    <a href="/RendezVous/Add/@disp.Id/@doctor.Id" class="btn btn-success">
                                                                        Disponible 
                                                                        </a>

                                                                    </td>
                                                                }
                                                                else
                                                                {
                                                                    <td>
                                                                        <span class="badge badge-danger">Non disponible</span>
                                                                    </td>
                                                                }
                                                            }

                                                        </tr>
                                                    }
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <script>
                                //optimiser sidebar
                                document.body.classList.add("sidebar-icon-only");
                            </script>

                            }
                        
                        </div>
                    </div>
        </div>
    </section>*@


  
    @RenderBody();

    <!-- FOOTER -->
    <footer data-stellar-background-ratio="5">
        <div class="container">
            <div class="row">
                <div class="col-md-12 col-sm-12 border-top">
                    <div class="col-md-4 col-sm-6">
                        <div class="copyright-text">
                            <p>
                                Copyright &copy; 2023 Your Company

                                
                            </p>
                        </div>
                    </div>
                    <div class="col-md-6 col-sm-6">
                        <div class="footer-link">
                            <a href="#">Laboratory Tests</a>
                            <a href="#">Departments</a>
                            <a href="#">Insurance Policy</a>
                            <a href="#">Careers</a>
                        </div>
                    </div>
                    <div class="col-md-2 col-sm-2 text-align-center">
                        <div class="angle-up-btn">
                            <a href="#top" class="smoothScroll wow fadeInUp" data-wow-delay="1.2s"><i class="fa fa-angle-up"></i></a>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </footer>

    <!-- SCRIPTS -->
    <!-- SCRIPTS -->
    <script src="~/js/jquery.js"></script>
    <script src="~/js/bootstrap.min.js"></script>
    <script src="~/js/jquery.sticky.js"></script>
    <script src="~/js/jquery.stellar.min.js"></script>
    <script src="~/js/wow.min.js"></script>
    <script src="~/js/smoothscroll.js"></script>
    <script src="~/js/owl.carousel.min.js"></script>
    <script src="~/js/custom.js"></script>

</body>
</html>